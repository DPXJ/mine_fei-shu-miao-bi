# 项目结构说明

```
01-飞书文档图文AI创作/
│
├── 📁 backend_py/                 # 后端服务 (FastAPI)
│   ├── routers/                   # API路由模块
│   │   ├── __init__.py
│   │   ├── auth.py               # 飞书OAuth认证
│   │   ├── documents.py          # 文档操作API
│   │   └── ai.py                 # AI创作API (Gemini)
│   │
│   ├── services/                  # 业务逻辑层
│   │   └── __init__.py
│   │
│   ├── main.py                    # FastAPI主入口
│   ├── requirements.txt           # Python依赖
│   ├── .env.example              # 环境变量示例
│   └── .env                      # 环境变量 (需手动创建)
│
├── 📁 frontend/                   # 前端应用 (Next.js)
│   ├── src/
│   │   ├── app/                  # Next.js App Router
│   │   │   ├── page.tsx         # 首页（登录页）
│   │   │   ├── layout.tsx       # 根布局
│   │   │   ├── globals.css      # 全局样式
│   │   │   ├── auth/
│   │   │   │   └── callback/
│   │   │   │       └── page.tsx # OAuth回调页
│   │   │   └── workspace/
│   │   │       └── page.tsx     # 工作区主页
│   │   │
│   │   ├── components/           # React组件
│   │   │   └── EditorWorkspace.tsx  # 编辑器工作区
│   │   │
│   │   ├── services/             # API服务层
│   │   │   ├── auth.ts          # 认证服务
│   │   │   ├── documents.ts     # 文档服务
│   │   │   └── ai.ts            # AI服务
│   │   │
│   │   └── types/                # TypeScript类型定义
│   │       └── index.ts
│   │
│   ├── public/                    # 静态资源
│   │   └── robots.txt
│   │
│   ├── package.json              # Node.js依赖
│   ├── tsconfig.json             # TypeScript配置
│   ├── next.config.js            # Next.js配置
│   ├── tailwind.config.js        # Tailwind CSS配置
│   ├── postcss.config.js         # PostCSS配置
│   ├── .env.local.example        # 环境变量示例
│   └── .env.local                # 环境变量 (需手动创建)
│
├── 📄 文档文件
│   ├── README.md                 # 项目说明
│   ├── 快速开始.md               # 快速入门指南
│   ├── 配置指南.md               # 详细配置文档
│   ├── 项目结构.md               # 本文件
│   └── LICENSE                   # MIT许可证
│
├── 🚀 启动脚本
│   ├── 启动项目.bat              # Windows批处理启动
│   ├── start_all.ps1             # PowerShell启动脚本
│   ├── 启动后端.bat              # 仅启动后端
│   ├── 启动前端.bat              # 仅启动前端
│   └── 安装依赖.bat              # 依赖安装脚本
│
└── .gitignore                    # Git忽略文件

```

## 核心模块说明

### 后端模块

#### 1. 认证模块 (`routers/auth.py`)
- OAuth授权流程
- Token管理
- 用户信息获取

#### 2. 文档模块 (`routers/documents.py`)
- 文档列表获取
- 文档内容解析
- 图片下载处理

#### 3. AI模块 (`routers/ai.py`)
- 文章生成
- 多轮对话
- 会话管理

### 前端模块

#### 1. 页面组件
- **首页** (`app/page.tsx`)：欢迎页和登录入口
- **回调页** (`app/auth/callback/page.tsx`)：处理OAuth回调
- **工作区** (`app/workspace/page.tsx`)：文档列表和主工作区

#### 2. 功能组件
- **EditorWorkspace**：核心编辑器，包含：
  - 左侧素材栏
  - 右侧创作区
  - 底部对话输入

#### 3. 服务层
- **authService**：认证相关操作
- **documentService**：文档CRUD
- **aiService**：AI创作API调用

## 数据流向

```
用户操作
   ↓
前端组件 (React)
   ↓
服务层 (services/*.ts)
   ↓
HTTP请求 (Axios)
   ↓
后端API (FastAPI)
   ↓
外部服务 (飞书API / Gemini API)
   ↓
返回数据
   ↓
前端渲染更新
```

## 技术选型理由

### 后端：FastAPI
- ✅ 高性能异步框架
- ✅ 自动生成API文档
- ✅ 类型提示支持
- ✅ 易于集成第三方API

### 前端：Next.js 14
- ✅ React服务端渲染
- ✅ App Router架构
- ✅ 优秀的开发体验
- ✅ 内置优化

### UI：Ant Design + Tailwind CSS
- ✅ 企业级组件库
- ✅ 快速原型开发
- ✅ 美观专业的界面
- ✅ 响应式设计

### AI：Google Gemini 1.5 Pro
- ✅ 强大的多模态能力
- ✅ 支持长上下文
- ✅ 免费配额充足
- ✅ 优秀的中文理解

## 扩展建议

### 短期优化
- [ ] 添加文章导出为Word/PDF功能
- [ ] 实现历史会话保存
- [ ] 添加常用prompt模板库
- [ ] 优化图片处理逻辑

### 中期功能
- [ ] 支持更多AI模型选择
- [ ] 批量处理多个文档
- [ ] 用户偏好设置
- [ ] 创作历史记录

### 长期规划
- [ ] 团队协作功能
- [ ] 文档版本管理
- [ ] 自定义AI训练
- [ ] 移动端适配


