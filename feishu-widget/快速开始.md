# ğŸš€ é£ä¹¦æ–‡æ¡£å°ç»„ä»¶ - å¿«é€Ÿå¼€å§‹

## âœ… é¡¹ç›®å·²åˆ›å»ºå®Œæˆ!

æ–‡ä»¶ç»“æ„:
```
feishu-widget/
â”œâ”€â”€ README.md              âœ… é¡¹ç›®è¯´æ˜
â”œâ”€â”€ package.json           âœ… ä¾èµ–é…ç½®
â”œâ”€â”€ tsconfig.json          âœ… TypeScripté…ç½®
â”œâ”€â”€ webpack.config.js      âœ… æ‰“åŒ…é…ç½®
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.tsx         âœ… å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ App.tsx           âœ… ä¸»ç•Œé¢
â”‚   â”œâ”€â”€ App.css           âœ… æ ·å¼
â”‚   â””â”€â”€ services/
â”‚       â””â”€â”€ api.ts        âœ… APIæœåŠ¡
â””â”€â”€ public/
    â”œâ”€â”€ index.html        âœ… HTMLæ¨¡æ¿
    â””â”€â”€ manifest.json     âœ… é£ä¹¦é…ç½®
```

---

## ğŸ“‹ ä¸‹ä¸€æ­¥æ“ä½œ

### æ­¥éª¤1: å®‰è£…ä¾èµ– (5åˆ†é’Ÿ)

```bash
cd feishu-widget
npm install
```

**å¯èƒ½é‡åˆ°çš„é—®é¢˜:**
- å¦‚æœ`npm install`å¾ˆæ…¢,å¯ä»¥ä½¿ç”¨å›½å†…é•œåƒ:
  ```bash
  npm install --registry=https://registry.npmmirror.com
  ```

---

### æ­¥éª¤2: é…ç½®åç«¯åœ°å€ (1åˆ†é’Ÿ)

ç¼–è¾‘ `src/services/api.ts`,ç¡®è®¤åç«¯åœ°å€:
```typescript
const BACKEND_URL = 'http://localhost:8000'; // ä½ çš„åç«¯åœ°å€
```

**æ³¨æ„:** åç«¯éœ€è¦æ·»åŠ CORSé…ç½®!

---

### æ­¥éª¤3: å¯åŠ¨å¼€å‘æœåŠ¡å™¨ (2åˆ†é’Ÿ)

```bash
npm run dev
```

æµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€ `http://localhost:3001`

**ä½ ä¼šçœ‹åˆ°:**
- ğŸ“„ æ–‡æ¡£å†…å®¹é¢„è§ˆ
- âœ¨ AIæŒ‡ä»¤è¾“å…¥æ¡†
- ğŸš€ ç”ŸæˆæŒ‰é’®

---

### æ­¥éª¤4: é…ç½®åç«¯CORS (é‡è¦!)

ç¼–è¾‘ `backend_py/main.py`,æ·»åŠ CORSé…ç½®:

```python
from fastapi.middleware.cors import CORSMiddleware

app = FastAPI()

# æ·»åŠ CORSé…ç½®
app.add_middleware(
    CORSMiddleware,
    allow_origins=["http://localhost:3001", "*"],  # å¼€å‘ç¯å¢ƒå…è®¸æ‰€æœ‰æ¥æº
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

**ç„¶åé‡å¯åç«¯:**
```bash
cd backend_py
python main.py
```

---

### æ­¥éª¤5: æµ‹è¯•åŠŸèƒ½ (5åˆ†é’Ÿ)

1. âœ… æ‰“å¼€ `http://localhost:3001`
2. âœ… æŸ¥çœ‹æ–‡æ¡£å†…å®¹é¢„è§ˆ (å½“å‰æ˜¯æ¨¡æ‹Ÿæ•°æ®)
3. âœ… è¾“å…¥AIæŒ‡ä»¤,ä¾‹å¦‚: "æ¶¦è‰²"
4. âœ… ç‚¹å‡»"ç”Ÿæˆ"æŒ‰é’®
5. âœ… æŸ¥çœ‹ç”Ÿæˆç»“æœ

**é¢„æœŸç»“æœ:**
- åç«¯åº”è¯¥æ”¶åˆ°è¯·æ±‚å¹¶è°ƒç”¨QwenVL
- å‰ç«¯æ˜¾ç¤ºç”Ÿæˆçš„å†…å®¹

---

## ğŸ¯ åç»­å¼€å‘æ­¥éª¤

### Phase 1: æœ¬åœ°å¼€å‘ (å½“å‰é˜¶æ®µ)
- âœ… åŸºç¡€UIå·²å®Œæˆ
- â³ æµ‹è¯•åç«¯APIè°ƒç”¨
- â³ å®Œå–„é”™è¯¯å¤„ç†

### Phase 2: é›†æˆé£ä¹¦SDK (1-2å¤©)
1. å®‰è£…é£ä¹¦SDK:
   ```bash
   npm install @lark-base-open/js-sdk
   ```

2. æ›¿æ¢æ¨¡æ‹Ÿæ•°æ®,ä½¿ç”¨çœŸå®é£ä¹¦API:
   ```typescript
   import { docx } from '@lark-base-open/js-sdk';
   
   // è¯»å–çœŸå®æ–‡æ¡£
   const blocks = await docx.getBlocks();
   const texts = blocks.filter(b => b.type === 'text').map(b => b.content);
   ```

3. å®ç°å†…å®¹æ’å…¥:
   ```typescript
   // æ’å…¥ç”Ÿæˆçš„å†…å®¹
   await docx.insertBlock({
     type: 'text',
     content: result.content,
     position: 'end'
   });
   ```

### Phase 3: é£ä¹¦åº”ç”¨é…ç½® (1å¤©)
1. ç™»å½•é£ä¹¦å¼€å‘è€…åå°: https://open.feishu.cn/app
2. åˆ›å»º "æ–‡æ¡£å°ç»„ä»¶" ç±»å‹åº”ç”¨
3. é…ç½®æƒé™:
   - docx:read - è¯»å–æ–‡æ¡£
   - docx:write - ç¼–è¾‘æ–‡æ¡£
4. é…ç½®å›è°ƒåœ°å€
5. è®°å½• App ID å’Œ App Secret

### Phase 4: æ„å»ºå’Œéƒ¨ç½² (1å¤©)
1. æ„å»ºç”Ÿäº§ç‰ˆæœ¬:
   ```bash
   npm run build
   ```

2. ä¸Šä¼ åˆ°é£ä¹¦:
   - è¿›å…¥å¼€å‘è€…åå°
   - ä¸Šä¼  `dist/` ç›®å½•
   - æäº¤å®¡æ ¸

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: npm installå¤±è´¥?
**A:** å°è¯•ä½¿ç”¨å›½å†…é•œåƒæˆ–cnpm:
```bash
npm install --registry=https://registry.npmmirror.com
```

### Q2: CORSé”™è¯¯?
**A:** ç¡®ä¿åç«¯å·²æ·»åŠ CORSé…ç½®,å¹¶é‡å¯åç«¯æœåŠ¡ã€‚

### Q3: åç«¯æ— æ³•è®¿é—®?
**A:** æ£€æŸ¥:
1. åç«¯æ˜¯å¦æ­£å¸¸è¿è¡Œ (http://localhost:8000)
2. åç«¯CORSé…ç½®æ˜¯å¦æ­£ç¡®
3. å‰ç«¯APIåœ°å€æ˜¯å¦æ­£ç¡®

### Q4: å¦‚ä½•è°ƒè¯•?
**A:** 
- å‰ç«¯: æµè§ˆå™¨F12 â†’ ConsoleæŸ¥çœ‹æ—¥å¿—
- åç«¯: æŸ¥çœ‹å‘½ä»¤è¡Œè¾“å‡º

---

## ğŸ“š å‚è€ƒèµ„æ–™

- [é£ä¹¦å¼€æ”¾å¹³å°](https://open.feishu.cn/)
- [é£ä¹¦æ–‡æ¡£å°ç»„ä»¶å¼€å‘æŒ‡å—](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/block/guide/block-introduction)
- [Reactå®˜æ–¹æ–‡æ¡£](https://react.dev/)
- [Ant Designç»„ä»¶åº“](https://ant.design/)

---

## ğŸ’¡ ä¸‹ä¸€æ­¥å»ºè®®

**ç«‹å³æµ‹è¯•:**
1. å®‰è£…ä¾èµ–: `cd feishu-widget && npm install`
2. é…ç½®åç«¯CORS
3. å¯åŠ¨å‰ç«¯: `npm run dev`
4. æµ‹è¯•AIç”ŸæˆåŠŸèƒ½

**å‘Šè¯‰æˆ‘æµ‹è¯•ç»“æœ,æˆ‘ä¼šç»§ç»­å¸®ä½ å®Œå–„! ğŸš€**

