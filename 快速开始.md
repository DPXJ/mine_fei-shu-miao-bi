# 🚀 快速开始指南

## 📋 当前状态

✅ **后端已启动** - 使用DeepSeek（仅文本）
✅ **多模态功能已添加** - 支持Gemini和千问VL
⚠️ **需要切换AI模型以使用图片理解功能**

---

## 🎯 启动项目

### 方法一：使用启动脚本

**双击运行**：
- `启动后端修复版.bat` - 启动后端
- 在frontend目录双击运行 `npm run dev` - 启动前端

### 方法二：手动启动

```bash
# 终端1 - 启动后端
cd backend_py
python main.py

# 终端2 - 启动前端
cd frontend
npm run dev
```

然后访问：http://localhost:3000

---

## 📸 启用图片理解功能

### 方案一：使用Gemini（需要VPN）⭐

**步骤**：
1. **确保VPN已开启**
2. **编辑 `backend_py/main.py`** 第22行：
   ```python
   # 将这行：
   os.environ["AI_PROVIDER"] = "deepseek"
   
   # 改为：
   os.environ["AI_PROVIDER"] = "gemini"
   ```
3. **重启后端服务**
4. **完成！** 现在支持图片理解和智能排版

### 方案二：使用千问VL（国内可用）⭐⭐ 推荐

**步骤**：
1. **获取千问API Key**：
   - 访问：https://dashscope.console.aliyun.com/
   - 注册/登录账号
   - 开通"灵积模型服务"
   - 创建API Key

2. **编辑 `backend_py/main.py`**：
   ```python
   # 添加这两行（第28-29行）：
   os.environ["QWEN_API_KEY"] = "你的千问API_Key"
   os.environ["AI_PROVIDER"] = "qwen"
   
   # 注释掉或修改第22行：
   # os.environ["AI_PROVIDER"] = "deepseek"
   ```

3. **重启后端服务**
4. **完成！** 现在支持图片理解和智能排版，无需VPN

---

## 💡 使用流程

### 1. 登录飞书

1. 打开 http://localhost:3000
2. 点击"使用飞书登录"
3. 授权应用访问文档

### 2. 选择文档

1. 在文档列表中选择一个包含图片的文档
2. 点击进入编辑器

### 3. 创作文章

**如果使用DeepSeek（当前）**：
- 输入：`帮我优化一下文章的文字结构`
- 点击"生成"
- ⚠️ 不支持图片理解

**如果使用Gemini/千问VL**：
- 输入：`根据图片内容，创作一篇图文并茂的文章，合理安排图片位置`
- 点击"生成"
- ✅ AI会理解图片内容并智能排版

### 4. 预览排版

1. 文章生成后，点击 **"预览排版"** 按钮
2. 查看图文混排效果
3. 图片会自动显示在最合适的位置

### 5. 继续优化

- 输入新的指令继续优化
- 例如：`把第二张图片移到开头`
- 例如：`再润色一下第三段`

---

## 🔧 功能对比

| 当前状态（DeepSeek） | 切换到Gemini/千问VL |
|---------------------|-------------------|
| ✅ 文本优化 | ✅ 文本优化 |
| ❌ 不理解图片 | ✅ 理解图片内容 |
| ❌ 图片随机排列 | ✅ 智能排版图片 |
| ✅ 国内直接可用 | Gemini需VPN / 千问国内可用 |
| ⚡ 速度快 | ⚡ Gemini较慢 / 千问快 |

---

## 📖 详细文档

- `图片理解和智能排版功能说明.md` - 完整功能说明
- `AI配置说明.md` - AI模型配置详解

---

## ❓ 常见问题

### Q: 如何知道当前使用哪个AI模型？
A: 查看后端启动日志，会显示：
```
Using AI Provider: deepseek  # 或 gemini / qwen
```

### Q: 切换AI模型需要重装依赖吗？
A: 不需要！只需修改配置并重启后端。

### Q: Gemini一直超时怎么办？
A: 
1. 确认VPN已开启且稳定
2. 或者切换到千问VL（国内可用）

### Q: 千问VL在哪里申请？
A: https://dashscope.console.aliyun.com/ - 注册即可使用，有免费额度

---

## 🎉 开始创作

现在您可以：
1. 使用DeepSeek进行纯文本优化（当前配置）
2. 或切换到Gemini/千问VL，体验图片理解和智能排版！

**祝创作愉快！** ✨
